// Kyle Fiegener
// ©LOL copyright

// Animate EVERYTHING, MWAHAHAHAAA
*, *::before, *::after
{
    transition: transform   $transition-duration,
                color       $transition-duration,
                opacity     $transition-duration,
                border      $transition-duration,
                text-shadow $transition-duration,
                box-shadow  $transition-duration;
}

body
{
    background-color: black;
    
    @include glow-idle-text($text-color);
    
    font-family: $font-family-bottom-level;
    font-size:   $font-size-base;
    line-height: $line-height-computed;
    
    width: 100%;
}

.h1, .h2, .h3, .h4, .h5, .h6, h1, h2, h3, h4, h5, h6
{
    font-weight: 500;
    line-height: 1.1;
    
    margin-top:     1em;
    margin-bottom:  0.5em;
    
    @at-root *:not(a) > &:first-child
    {
        margin-top: 0.25em;
    }
}
.h1, .h2, .h3, h1, h2, h3
{
    font-family: $font-family-top-level;
    // margin-top: 16px;
    // margin-bottom: 8px;
}
.h4, .h5, .h6, h4, h5, h6
{
    font-family: $font-family-mid-level;
    // margin-top: 12px;
    // margin-bottom: 6px;
}
.h1, h1
{
    font-size: $font-size-h1;
}
.h2, h2
{
    font-size: $font-size-h2;
}
.h3, h3
{
    font-size: $font-size-h3;
}
.h4, h4
{
    //font-size: $font-size-h4 + 2; // hack for smaller-ness of Port Lligat font
    font-size: $font-size-h4;
}
.h5, h5
{
    //font-size: $font-size-h5 + 2; // hack for smaller-ness of Port Lligat font
    font-size: $font-size-h5;
    //font-weight: 600;
}
.h6, h6
{
    //font-size: $font-size-h6 + 2; // hack for smaller-ness of Port Lligat font
    font-size: $font-size-h6;
    //font-weight: 700;
}

p
{
    margin: 0.5em 0;
}
// p:first-child,
// h1 + p, h2 + p, h3 + p, h4 + p, h5 + p, h6 + p,
// .h1 + p,.h2 + p,.h3 + p,.h4 + p,.h5 + p,.h6 + p
p:first-child
{
    margin-top: 0;
}
p:last-child
{
    margin-bottom: 0;
}

hr
{
    width: 85%;
        
    @include spell-box($text-color);
    @include glow-mild-border($text-color);
    
    margin: 1em auto;
}

b, strong
{
    font-weight: bold;
}
i, em
{
    font-style: italic;
}

ul
{
    padding-left: 1em;
    
    > li::before
    {
        content: "•";
        
        position: relative;
        display: inline-block;
        right: 1em;
        width: 0;
    }
}

a:not(.button)
{
    @include glow-idle-text($link-color);
    text-decoration: none;
    
    position: relative;
    
    &:hover, &:focus
    {
        @include glow-mild-text($link-color);
    }
    
    &::after
    {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        
        @include spell-box($link-color);
        
        opacity: 0;
    }
    &:focus:not(:active)::after
    {
        content: "";
        
        @include glow-mild-border($link-color);
        
        opacity: 1;
    }
    
    &:active
    {
        @include glow-strong-text($link-color);
    }
}

a > img
{
    @include spell-box($link-color);
    
    &:hover, &:focus
    {
        @include glow-mild-border($link-color);
    }
    &:active
    {
        @include glow-strong-border($link-color);
    }
}

button,
input[type="button"],
input[type="reset"],
input[type="submit"],
.button
{
    @include spell-box($bttn-color, 2px, 4px);
    
    padding: 3px 6px;
    
    span, i
    {
        @include glow-idle-text($bttn-color);
        display: inline-block;
        //transition: all 0.25s;
    }
    span
    {
        font-family: $font-stack-arcane-mid;
    }
    
    &[disabled]
    {
        span, i
        {
            opacity: 0.6
        }
    }
    &:hover, &:focus
    {
        &:not([disabled])
        {
            @include glow-mild-border($bttn-color);
            
            span, i
            {
                @include glow-mild-text($bttn-color);
                transform: scale(1.15, 1.15);
            }
        }
        &[disabled]
        {
            span, i
            {
                opacity: 0.3;
                transform: scale(0.8, 0.8);
            }
        }
    }
    
    &:active
    {
        @include glow-strong-border($bttn-color);
        
        padding: 3px 6px; // probably only necessary because of something bootstrap's doing...?
        
        span, i
        {
            @include glow-strong-text($bttn-color);
            transform: scale(1.25, 1.25);
        }
    }
    
    &.selected
    {
        span, i
        {
            @include glow-strong-text($bttn-color);
            transform: scale(1.25, 1.25);
        }
    }
}

form label
{
    @include glow-idle-text($form-color, $form-opacity);
}
form label.label-focus
{
    @include glow-mild-text($form-color);
}

// http://www.w3schools.com/html/html_form_input_types.asp
// Typing-based input fields
textarea,
input:not([type="submit"]):not([type="reset"]):not([type="radio"]):not([type="checkbox"]):not([type="button"]):not([type="color"]):not([type="range"]) //, :not([type="number"]),
// div.input-type-number
{
    @include glow-idle-text($form-color, $form-opacity);
    @include spell-box($form-color, $opacity:$form-opacity);
    
    &.has-error
    {
        @include spell-box($error-color);
    }
    
    padding: $box-padding / 2;
    
    //@include glow-mild-border($form-color);
    
    &:focus:not([readonly]), &.focus
    {
        @include glow-mild-text($form-color);
        @include glow-strong-border($form-color);
        
        &.has-error
        {
            @include glow-strong-border($error-color, 0%);
        }
    }
    &[readonly]
    {
        @include spell-box($text-color);
        @include glow-mild-border($text-color);
    }
}

// Content container with inward-moving rings at the border to look like a portal
.portal
{
    background: $portal-bg-properties;
}
.portal, .portal::before, .portal::after
{
    border-radius : 6px;
    border        : 1px solid $container-color;
}
.portal
{
    border-color: tint($container-color, $glow-portal-white-percent);
    box-shadow  : inset   0 0 ($portal-ring-spacing * 2) 1px rgba($container-color, 1),
               /*outset*/ 0 0  $glow-strong-border-blur  2px rgba($container-color, 1);
    padding     : $portal-ring-spacing - 2;
    
    position    : relative;
}
.portal::before, .portal::after
{
    content       : "";
    position      : absolute;
    
    animation-name            : portal-ring-loop;
    animation-duration        : $portal-ring-loop-duration;
    animation-timing-function : linear;
    animation-iteration-count : infinite;
    
    pointer-events: none;
}
.portal::before
{
    animation-delay: -($portal-ring-loop-duration / 2);
}

// Very simple content container with matching text and border color – probably best for messages and the like.
.box
{
    padding: $box-padding;
    
    @include spell-box($container-color);
    @include glow-idle-text($container-color);
}

@keyframes portal-ring-loop
{
    0%
    {
        width  : calc(100% - 0px);
        height : calc(100% - 0px);
        top    : 0;
        left   : 0;
        
        box-shadow : inset   0 0 $glow-mild-border-blur 1px rgba($container-color, 1),
                  /*outset*/ 0 0 $glow-mild-border-blur 1px rgba($container-color, 1);
        opacity: 1;
    }
    50%
    {
        width  : calc(100% - #{$portal-ring-spacing - 2});
        height : calc(100% - #{$portal-ring-spacing - 2});
        top    : $portal-ring-spacing / 2 - 1;
        left   : $portal-ring-spacing / 2 - 1;
        
        box-shadow : inset   0 0 ($glow-mild-border-blur / 2) 0.5px rgba($container-color, 1),
                  /*outset*/ 0 0 ($glow-mild-border-blur / 2) 0.5px rgba($container-color, 1);
        opacity: 0.5;
    }
    100%
    {
        width  : calc(100% - #{$portal-ring-spacing * 2 - 2});
        height : calc(100% - #{$portal-ring-spacing * 2 - 2});
        top    : $portal-ring-spacing - 1;
        left   : $portal-ring-spacing - 1;
        
        box-shadow : inset   0 0 0 0 rgba($container-color, 1),
                  /*outset*/ 0 0 0 0 rgba($container-color, 1);
        opacity: 0;
    }
}

.form-widget
{
    width: 100%;
}

/* Spin buttons via external DOM elements
fieldset.input-type-number
{
    input[type="number"]
    {
        // padding-right: 18px !important;
    }
    
    .spin-block
    {
        // margin-left: -10px;
        display: inline-block;
        // position: relative;
        // top: 5px;
        // left: -20px;
    }
    button.spin, .spin.button
    {
        border: none;
        @include glow-idle-text($form-color);
        padding: 0;
        margin: 0;
        line-height: 0;
        
        cursor: default;
        
        &:first-child
        {
            padding-bottom: 5px;
        }
        &:last-child
        {
            padding-top: 5px;
        }
        
        i
        {
            @include glow-idle-text($form-color);
            line-height: 0;
        }
    }
}//*/
// input[type=number]::shadow
// {
//     // *
//     // {
//         background: none;
//         border: none;
//         @include glow-idle-text($form-color);

//         &:focus
//         {
//             @include glow-mild-text($form-color);
//         }
//     // }
// }

// .flavor-error
// {
//     color: $error-color;
//     @include glow-idle-text($error-color);
// }
